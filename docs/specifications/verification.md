---
status: draft
---

# Verification and Drift Detection

How to keep specifications honest—detecting and resolving divergence between specs and implementation.

> **Status note**: These are proposed approaches. None have been implemented or validated yet. The patterns below represent our best thinking on how drift detection *could* work.

## Detection Approaches

1. **PR-time analysis**: AI reads spec + code diff, flags inconsistencies. Non-blocking warning. Cheapest moment to fix.
2. **Periodic audit**: Scheduled scan producing drift reports. Noisier but catches gradual drift.
3. **Test-spec linkage**: When tests change without spec changes, flag potential drift.
4. **Structured assertion checking**: Behavior statements precise enough for mechanical verification.

## Backlinks Enable Automation

Implementation annotates which spec it implements:

```python
# spec: docs/specs/auth.md
# spec-section: Behavior/Login
def login(credentials):
    ...
```

Tools can then:
1. Find all files referencing a spec
2. Compare spec intent with implementation
3. Flag divergence

Without backlinks, detection requires guessing which code relates to which spec.

## Git as the Drift Database

Drift findings and resolutions are **structured data in the repo**:

```yaml
# .specs/status.yaml (generated by tooling)
checks:
  - spec: docs/specs/auth.md
    last-verified: 2026-01-22
    status: current
    implementors:
      - src/auth/login.ts
      - src/auth/middleware.ts
  - spec: docs/specs/rate-limiting.md
    last-verified: 2026-01-20
    status: drift-detected
    finding: "Spec states 100 req/min, implementation shows 200 req/min"
    resolution: investigating
```

**Why this matters**:
- Audit trail in git history
- Queryable by tooling and AI agents
- Reviewable in PRs (drift responses are code-reviewed)
- No external dashboard dependency

**Pattern**: Git is the database, structured files are the tables, commits are the transactions.

## Trust Calibration

- **Start high-confidence only** — false positives kill trust in tooling
- **Suggestions, not blockers** — detection over prevention
- **AI flags, humans decide** — no auto-correction (initially)
- **Cost management** — only analyze files referencing specs, only when changed

## Related

- [Principles](../../policies/living-specifications.md) — #13 (references flow upstream)
- [Artifact relationships](relationships.md) — backlink patterns
